!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.lib_tokenize=t():e.lib_tokenize=t()}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";const n={whitespace:"wsp",symbol:"sym",delimiter:"del",literal:"lit",identifier:"idf",numeric:"num",keyword:"kwd"};t.TokenTypes=n,t.NewTokenizer=function(){let e={};function t(e,t,r){let i=r,l=t.length;for(;e.whitespace.includes(t.charAt(i))&&(i++,i!==l););return i===r?null:{type:n.whitespace,token:t.substring(r,i),at:r}}function r(e,t,r){if(!e.symbols.includes(t.charAt(r)))return null;return{type:n.symbol,token:t.charAt(r),at:r}}function i(e,t,r){let i=r,l=t.length;for(;;){let e=t.charAt(i);if(!(e>="0"&&e<="9"||"."===e))break;if(i++,i===l)break}return i===r?null:{type:n.numeric,token:t.substring(r,i),at:r}}function l(e,t,r){if(!e.literal_delimiters.includes(t.charAt(r)))return null;let i=t.charAt(r),l=r+1,o=t.length;for(;!(l>=o);){let r=t.charAt(l);if(e.self_escape_literal_delimiters&&e.literal_delimiters.includes(r)&&l+1<o&&r===t.charAt(l+1))l++,l++;else if(e.literal_escape_chars.includes(r))l++,l++;else{if(r===i){l++;break}if(l++,l>=o)break}}return l===r?null:{type:n.literal,token:t.substring(r,l),at:r}}function o(e,t,r){let i=r,l=t.length;for(;;){let r=t.charAt(i);if(e.whitespace.includes(r))break;if(e.symbols.includes(r))break;if(e.literal_delimiters.includes(r))break;if(i++,i===l)break}if(i===r)return null;let o={type:n.identifier,token:t.substring(r,i),at:r},s=!1;return s=e.keywords_are_case_sensitive?e.keywords.find(e=>e===o.token):e.keywords.find(e=>e.toLowerCase()===o.token.toLowerCase()),s&&(o.type=n.keyword),o}function s(e){let s=[];if(!e)return s;let a=0,u=e.length;for(;a!==u;){let n=t(this,e,a);if(n||(n=r(this,e,a)),n||(n=l(this,e,a)),n||(n=i(0,e,a)),n||(n=o(this,e,a)),!n)throw new Error(`Unable to continue parsing at location ${a}.`);a+=n.token.length,n&&"wsp"===n.type&&this.discard_whitespace||s.push(n)}var c;return c=this,s.forEach(e=>{e.type===n.numeric?c.resolve_numeric_values&&(e.token.indexOf(".")>=0?e.token=parseFloat(e.token):e.token=parseInt(e.token)):e.type===n.literal&&c.resolve_literal_values&&(e.token=e.token.substr(1,e.token.length-2))}),s}return e.whitespace=" \t\r\n",e.symbols=",:;=<>+-*/^()[]{}",e.literal_delimiters="'\"",e.literal_escape_chars="\\",e.self_escape_literal_delimiters=!1,e.keywords=[],e.keywords_are_case_sensitive=!1,e.discard_whitespace=!1,e.resolve_literal_values=!1,e.resolve_numeric_values=!1,e.tokenize=s,e.Tokenize=s,e},t.ParseCommandLine=e=>r(1).ParseCommandLine(this,e),t.ParseCsvString=e=>r(2).ParseCsvString(this,e)},function(e,t){t.ParseCommandLine=function(e,t){let r=e.NewTokenizer();r.whitespace=" \t\r\n",r.symbols="-:=",r.literal_delimiters="'\"",r.literal_escape_chars="\\",r.keywords=[],r.discard_whitespace=!0,r.resolve_literal_values=!0,r.resolve_numeric_values=!0;let n=r.tokenize(t),i={};for(;n.length>0;){for(;"-"===n[0].token;)if(n.splice(0,1),!n.length)throw new Error("Unexpected end of string. Expected an argument name after a '-'.");if(n[0].type!==e.TokenTypes.identifier)throw new Error(`No argument name was found after a '-' at position ${n[0].at}.`);let t=n[0].token;if(n.splice(0,1),i[t]=!0,!n.length)break;if("-"!==n[0].token){if((":"===n[0].token||"="===n[0].token)&&(n.splice(0,1),!n.length))throw new Error("Unexpected end of string. Expected an value after a ':' or '='.");if(n[0].type!==e.TokenTypes.identifier&&n[0].type!==e.TokenTypes.literal&&n[0].type!==e.TokenTypes.numeric)throw new Error(`Unexpected value at position ${n[0].at}. Expected an identifier, string literal, or numeric.`);i[t]=n[0].token,n.splice(0,1)}}return i}},function(e,t){t.ParseCsvString=function(e,t){let r=e.NewTokenizer();r.symbols=",",r.literal_delimiters='"',r.literal_escape_chars="\\",r.self_escape_literal_delimiters=!0,r.resolve_literal_values=!0;let n=r.tokenize(t),i=[];return n.forEach(t=>{t.type!==e.TokenTypes.literal&&t.type!==e.TokenTypes.identifier&&t.type!==e.TokenTypes.numeric||i.push(t.token)}),i}}])}));